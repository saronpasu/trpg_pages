!function(){window.document;var e,t,n,r,a,d,l,m,u,c,o,s=window.location.href,h=/^(http(s)?:\/\/.+)\?id=.+$/,p=/image\.(\w+)$/;if(!h.test(s))return!1;function g(){return document.getElementById("character-name").innerText}function C(e,t){var n;return(n=document.createElement("data")).setAttribute("name",e),null!=t&&(n.innerText=t),n}function f(e,t,n){var i;return(i=document.createElement("data")).setAttribute("name",e),i.setAttribute("type","numberResource"),i.setAttribute("currentValue",t),i.innerText=n,i}function E(e,t){var n;return(n=document.createElement("data")).setAttribute("name",e),n.setAttribute("type","note"),n.innerText=t,n}function y(){var t=document.getElementById("image").style.backgroundImage,n=/^.+\.(\/data\/chara\/\d+\/image\.\w+)/.exec(t);return!!n&&e+n[1].substring(1)}function T(){return!document.getElementById("image-none")}function v(e){return fetch(e).then(function(e){return!!e.ok&&e.arrayBuffer()}).then(function(e){data=e;var t=CryptoJS.lib.WordArray.create(data);return n=CryptoJS.SHA256(t).toString(),!0})}function B(){var e=document.createElement("character");e.setAttribute("location.name","table"),e.setAttribute("location.x",0),e.setAttribute("location.y",0),e.setAttribute("posZ",0),e.setAttribute("rotate",0),e.setAttribute("roll",0);var t=document.createElement("data");t.setAttribute("name","common");var n=document.createElement("data");n.setAttribute("name","name"),n.innerText=g(),t.appendChild(n),(n=document.createElement("data")).setAttribute("name","size"),n.innerText=1,t.appendChild(n);var i=document.createElement("data");return i.setAttribute("name","character"),i.appendChild(t),e.appendChild(i),e}function b(){var e,t;return e=B(),t=e.firstChild,v(y()).then(function(){var i=document.createElement("data");return i.setAttribute("name","image"),elem=document.createElement("data"),elem.setAttribute("type","image"),elem.setAttribute("name","imageIdentifier"),elem.innerText=n,i.appendChild(elem),t.appendChild(i),l=e,!0})}function x(){var e;return e=B(),characterNode.appendChild(commonNode),e.appendChild(characterNode),l=e,!0}function $(){var e;return e=document.getElementById("sub-status").getElementsByTagName("dd").item(2).innerText,/=(\d+)$/.test(e)&&(e=/=(\d+)$/.exec(e)[1]),e||(e=0),e}function I(){var e;return e=document.getElementById("sub-status").getElementsByTagName("dd").item(3).innerText,/=(\d+)$/.test(e)&&(e=/=(\d+)$/.exec(e)[1]),e&&"なし"!=e||(e=0),e}function N(){var e;return(e=document.getElementById("sin").getElementsByTagName("dd").item(0).innerText)&&"―"!=e||(e=0),e}function A(e){return e?Number(e):0}function D(){var e,t;return e={"器用度":[0,0,0],"敏捷度":[0,0,0],"筋力":[0,0,0],"生命力":[0,0,0],"知力":[0,0,0],"精神力":[0,0,0]},t=A(t=document.getElementById("stt-dex").lastChild.innerText),e["器用度"][0]=t,t=A(t=document.getElementById("stt-add-A").lastChild.innerText),e["器用度"][1]=t,t=A(t=document.getElementById("stt-bonus-dex").lastChild.innerText),e["器用度"][2]=t,t=A(t=document.getElementById("stt-agi").lastChild.innerText),e["敏捷度"][0]=t,t=A(t=document.getElementById("stt-add-B").lastChild.innerText),e["敏捷度"][1]=t,t=A(t=document.getElementById("stt-bonus-agi").lastChild.innerText),e["敏捷度"][2]=t,t=A(t=document.getElementById("stt-str").lastChild.innerText),e["筋力"][0]=t,t=A(t=document.getElementById("stt-add-C").lastChild.innerText),e["筋力"][1]=t,t=A(t=document.getElementById("stt-bonus-str").lastChild.innerText),e["筋力"][2]=t,t=A(t=document.getElementById("stt-vit").lastChild.innerText),e["生命力"][0]=t,t=A(t=document.getElementById("stt-add-D").lastChild.innerText),e["生命力"][1]=t,t=A(t=document.getElementById("stt-bonus-vit").lastChild.innerText),e["生命力"][2]=t,t=A(t=document.getElementById("stt-int").lastChild.innerText),e["知力"][0]=t,t=A(t=document.getElementById("stt-add-E").lastChild.innerText),e["知力"][1]=t,t=A(t=document.getElementById("stt-bonus-int").lastChild.innerText),e["知力"][2]=t,t=A(t=document.getElementById("stt-mnd").lastChild.innerText),e["精神力"][0]=t,t=A(t=document.getElementById("stt-add-F").lastChild.innerText),e["精神力"][1]=t,t=A(t=document.getElementById("stt-bonus-mnd").lastChild.innerText),e["精神力"][2]=t,e}function P(){var e,t,n;for(e=document.getElementById("package").getElementsByTagName("table"),t={},i=0;i<e.length;i++){var r,a,d,l;for(a=(r=e.item(i)).getElementsByTagName("th").item(0).innerText,d=r.getElementsByTagName("th"),l=r.getElementsByTagName("td"),t[a]={},j=1;j<d.length;j++){var m;n=A(n=l.item(1+2*(j-1)).innerText),m=d.item(j).innerText,t[a][m]=n}}return t}function H(){var e,t;for(e=[],t=document.getElementById("weapons").getElementsByTagName("tr"),i=1;i<t.length;i++){var n,r;for(r=[],n=t.item(i).getElementsByTagName("td"),j=0;j<n.length;j++){var a;a=n.item(j).innerText,3!=j&&6!=j||!a.includes("=")||(a=/=(\d+)$/.exec(a)[1]),7==j&&(a=!!a),r.push(a)}e.push(r)}return e}function M(){var e,t;for(e=[],t=document.getElementById("magic-power").getElementsByTagName("tr"),i=0;i<t.length;i++){var n;n=(n=(n=t.item(i).innerText.split(/\s/)).filter(function(e){return""!=e})).filter(function(e){return!e.includes("[")}),e.push(n)}return e}function O(){var e,t,n;(e=document.createElement("chat-palette")).setAttribute("dicebot","SwordWorld2_5"),n="//======\n",n+="//判定 非戦闘\n",n+="2D6+{冒険者レベル}+{器用度ボーナス}+{器用度修正} 冒険者+器用度ボーナス+(修正値)\n",n+="2D6+{冒険者レベル}+{敏捷度ボーナス}+{敏捷度修正} 冒険者+敏捷度ボーナス+(修正値)\n",n+="2D6+{冒険者レベル}+{筋力ボーナス}+{筋力修正} 冒険者+筋力ボーナス+(修正値)\n",n+="2D6+{冒険者レベル}+{生命力ボーナス}+{生命力修正} 冒険者+生命力ボーナス+(修正値)\n",n+="2D6+{冒険者レベル}+{知力ボーナス}+{知力修正} 冒険者+知力ボーナス+(修正値)\n",n+="2D6+{冒険者レベル}+{精神力ボーナス}+{精神力修正} 冒険者+精神力ボーナス+(修正値)\n",n+="\nパッケージ判定\n";var r,a,d,l=P();for(l=Object.entries(l),i=0;i<l.length;i++){var m;for(m=l[i][0],m=/^(.+)技能/.exec(m)[1],t=Object.entries(l[i][1]),j=0;j<t.length;j++)"技巧"==t[j][0]?n+=`2D6+${t[j][1]}+{器用度修正} ${m}:${t[j][0]}\n`:"運動"==t[j][0]?n+=`2D6+${t[j][1]}+{敏捷度修正} ${m}:${t[j][0]}\n`:"観察"!=t[j][0]&&"知識"!=t[j][0]||(n+=`2D6+${t[j][1]}+{知力修正} ${m}:${t[j][0]}\n`)}for(n+="\n\n",n+="//======\n",n+="// 判定 戦闘用\n",n+="2D6+{魔物知識}+{知力修正} 魔物知識判定\n",n+="2D6+{先制力}+{敏捷度修正} 先制判定\n",n+="\n",n+="// 武器攻撃\n",r=H(),i=0;i<r.length;i++)n+=`2D6+${r[i][3]}+{命中修正} 命中判定 ${r[i][0]}\n`,n+=`K${r[i][4]}+${r[i][6]}+{物理与ダメージ修正}[${r[i][5]}] 威力ロール ${r[i][0]}\n`,n+="\n";for(n+="// 回避\n",n+="2D+{回避力}+{回避修正} 回避判定\n",n+="\n",n+="// 被ダメージ計算\n",n+="//   Xにはダメージ値を入力してください\n",n+="C(X-{防護点}-{物理被ダメージ修正}) 物理ダメージ-防護点 = 実ダメージ\n",n+="C({HP}-X) HP-被ダメージ = 残りHP\n",n+="\n",n+="// 現在HP,現在MPを出すやつ\n",n+="HP:{HP}/{MHP}\n",n+="MP:{MP}/{MMP}\n",n+="HP:{HP}/{MHP} MP:{MP}/{MMP}\n",n+="\n",n+="// 精神抵抗,生命抵抗\n",n+="2D6+{精神抵抗力}+{精神抵抗修正} 精神抵抗判定\n",n+="2D6+{生命抵抗力}+{生命抵抗修正} 生命抵抗判定\n",n+="\n",n+="// 呪文行使\n",a=M(),i=0;i<a.length;i++){var u,c,o,s;u=/バード/,/(ソーサラー|コンジャラー|プリースト|フェアリーテイマー)/.test(a[i][0])?(c=`${a[i][1]} 呪文行使判定`,o=`魔力:${a[i][1]}`,s="{魔力修正}"):u.test(a[i][0])?(c="演奏判定",o=`奏力:${a[i][1]}`,s="{器用度修正}"):(c=`${a[i][1]}判定`,o=a[i][1],s="知力修正"),n+=`2D6+{${o}}+${s} ${c}\n`}for(n+="\n",n+="//======\n",n+="// 威力表テンプレート\n",d=[0,10,20,30,40,50],i=0;i<d.length;i++)n+=`K${d[i]}[10] 威力${d[i]}\n`,n+=`K${d[i]}[13] 威力${d[i]} クリティカルなし\n`,n+="\n";return n+="//======\n",n+="// 移動能力\n",n+="制限移動:{制限移動} 移動力:{移動力} 全力移動:{全力移動}\n",n+="\n",n+="//======\n",n+="// バフデバフ管理\n",n+="//   カウンターリモコンではありません\n",n+="//   現在のコマの値をチャットに発言するだけです\n\n",n+="{持続ラウンドカウンタA} 持続ラウンドカウンタA\n",n+="{持続ラウンドカウンタB} 持続ラウンドカウンタB\n",n+="{持続ラウンドカウンタC} 持続ラウンドカウンタC\n",n+="命中 バフ[{命中力:増加}] デバフ[{命中力:減少}]\n",n+="回避 バフ[{回避力:増加}] デバフ[{回避力:減少}]\n",n+="与ダメージ\\n",n+="  物理\\n  バフ[{物理:与ダメージ:増加}] デバフ[{物理:与ダメージ:減少}]\\n",n+="  魔法\\n  バフ[{魔法:与ダメージ:増加}] デバフ[{魔法:与ダメージ:減少}]\\n",n+="  共通\\n  バフ[{物理魔法共通:与ダメージ:増加}] デバフ[{物理魔法共通:与ダメージ:減少}]\n",n+="ダメージ軽減\\n",n+="  物理  [{物理:被ダメージ:軽減}]\\n",n+="  魔法  [{魔法:被ダメージ:軽減}]\\n",n+="  共通  [{物理魔法共通:被ダメージ:軽減}]\n",n+="能力強化\\n",n+="  器用度  バフ[{器用度:増加}]  デバフ[{器用度:減少}]  敏捷度  バフ[{敏捷度:増加}]  デバフ[{敏捷度:減少}]\\n",n+="  筋力  バフ[{筋力:増加}]  デバフ[{筋力:減少}]  生命力  バフ[{生命力:増加}]  デバフ[{生命力:減少}]\\n",n+="  知力  バフ[{知力:増加}]  デバフ[{知力:減少}]  精神力  バフ[{精神力:増加}]  デバフ[{精神力:減少}]\n",n+="//======\n",n+="// チャットパレット用の変数\n",n+="//\n",n+=`//MHP=${$()}\n`,n+=`//MMP=${I()}\n`,n+="//命中修正=({器用度:増加}-{器用度:減少}+{命中力:増加}-{命中力:減少})\n",n+="//回避修正=({敏捷度:増加}-{敏捷度:減少}+{回避力:増加}-{回避力:減少})\n",n+="//物理与ダメージ修正=({筋力:増加}-{筋力:減少}+{物理:与ダメージ:増加}-{物理:与ダメージ:減少}+",n+="{物理魔法共通:与ダメージ:増加}-{物理魔法共通:与ダメージ:減少})\n",n+="//物理被ダメージ修正=({防護点:増加}-{防護点:減少}+{物理:被ダメージ:軽減}+{物理魔法共通:被ダメージ:軽減})\n",n+="//魔力修正=({知力:増加}-{知力:減少}+{知力:増加}-{知力:減少})\n",n+="//魔法与ダメージ修正=({魔法:与ダメージ:増加}-{魔法:与ダメージ:減少}}\n",n+="//魔法被ダメージ修正=({魔法:被ダメージ:軽減}+{物理魔法共通:被ダメージ:軽減})\n",n+="{物理魔法共通:与ダメージ:増加}-{物理魔法共通:与ダメージ:減少})\n",n+="//精神抵抗修正=({精神力:増加}-{精神力:減少}+{精神抵抗:増加}-{精神抵抗:減少})\n",n+="//生命抵抗修正=({生命力:増加}-{生命力:減少}+{生命抵抗:増加}-{生命抵抗:減少})\n",n+="//器用度修正=({器用度:増加}-{器用度:減少})\n",n+="//敏捷度修正=({敏捷度:増加}-{敏捷度:減少})\n",n+="//筋力修正=({筋力:増加}-{筋力:減少})\n",n+="//生命力修正=({生命力:増加}-{生命力:減少})\n",n+="//知力修正=({知力:増加}-{知力:減少})\n",n+="//精神力修正=({精神力:増加}-{精神力:減少})\n",n+="\n\n",n+="//======\n",n+="// フェロー表\n",n+="//   第二行動が未登録の場合は第一行動になります\n",n+="choice[{フェローダイス}] フェロー表\n",n+="{行動A}\n",n+="{行動B}\n",n+="{行動C}\n",n+="{行動D}\n",n+="{行動E}\n",n+="{行動F}\n",n+="{行動G}\n",n+="{行動H}\n",n+="\n",n+="//======\n",n+="// フェロー用の変数\n",n+="//ダイス1=行動Aまたは行動B\n",n+="//ダイス2=行動Aまたは行動B\n",n+="//ダイス3=行動Cまたは行動D\n",n+="//ダイス4=行動Cまたは行動D\n",n+="//ダイス5=行動Eまたは行動F\n",n+="//ダイス6=行動Gまたは行動H\n",n+="//フェローダイス={ダイス1},{ダイス2},{ダイス3},{ダイス4},{ダイス5},{ダイス6}",e.innerText=n,e}function w(){return(e=[],t=document.getElementsByTagName("nav").item(0).lastElementChild.children.item(1).lastElementChild.href,fetch(t).then(function(e){return e.text()}).then(function(e){return(new DOMParser).parseFromString(e,"text/html")}).then(function(t){var n;for(n=t.getElementById("fellow-actions").lastElementChild.children,i=1;i<n.length;i++){var r,a,d,l,m,u,o,s,h;switch(s={},r=n.item(i),i){case 1:case 2:a=[1,2];break;case 3:case 4:a=[3,4];break;case 5:case 6:a=[5,6]}s.rollNumber=a,h=6==r.children.length?1:0,d=A(r.children.item(h).innerText),s.virtualDice=d,h+=1,l=r.children.item(h).innerText,s.action=l,h+=1,m=r.children.item(h).innerText,s.voice=m,h+=1,u=A(r.children.item(h).innerText),s.rollResult=u,h+=1,o=r.children.item(h).innerText,s.effect=o,h+=1,e.push(s)}c=e})).then(function(){var e;for(e=C("フェローデータ"),i=0;i<c.length;i++){var t,n,r,a;t=["A","B","C","D","E","F","G","H"],a=`行動:${(n=Object.entries(c[i]))[2][1]} セリフ:${n[3][1]} `,a+=`達成値:${n[4][1]} 効果:${n[5][1]}`,n[2][1]||(a="行動:登録なし"),r=C(`行動${t[i]}`,a),e.appendChild(r)}return o=e,!0});var e,t}function S(){var e;return e=document.getElementsByTagName("nav").item(0).firstElementChild.children.item(1),!!/f=1$/.test(e.firstElementChild.href)}function k(){return T()&&S()?b().then(function(){if(G(),S())return w().then(function(){var e;return m.firstChild.lastChild.appendChild(o),e=O(),m.appendChild(e),!0});var e=O();return m.appendChild(e),!0}):T()?b().then(function(){G();var e=O();return m.appendChild(e),!0}):S()?function(){if(G(),S())return w().then(function(){var e;return m.firstChild.lastChild.appendChild(o),e=O(),m.appendChild(e),!0});var e=O();m.appendChild(e);return!0}():function(){x(),G();var e=O();return m.appendChild(e),!0}()}function G(){var e,t,n,r,a,d,u,c;return t=l.firstChild,(e=document.createElement("data")).setAttribute("name","detail"),resourcesNode=function(){var e,t,n,i,r;return(e=document.createElement("data")).setAttribute("name","リソース"),t=$(),(r=document.createElement("data")).setAttribute("type","numberResource"),r.setAttribute("currentValue",t),r.setAttribute("name","HP"),r.innerText=t,e.appendChild(r),n=I(),(r=document.createElement("data")).setAttribute("type","numberResource"),r.setAttribute("currentValue",n),r.setAttribute("name","MP"),r.innerText=n,e.appendChild(r),i=N(),(r=document.createElement("data")).setAttribute("type","numberResource"),r.setAttribute("currentValue",i),r.setAttribute("name","穢れ"),r.innerText=5,e.appendChild(r),e}(),t.appendChild(e),e.appendChild(resourcesNode),e.appendChild((n=document.getElementById("player-name").innerText,C("プレイヤー名",n=/：(.+)$/.exec(n)[1]))),e.appendChild(function(e){var t,n;for(t=C("プロフィール"),n=Object.entries(e),i=0;i<n.length;i++){var r;r=C(n[i][0],n[i][1]),t.appendChild(r)}return t.appendChild(C("穢れ",N())),t}((r={},a=document.getElementById("race"),r["種族"]=a.lastElementChild.innerText,a=document.getElementById("gender"),r["性別"]=a.lastElementChild.innerText,a=document.getElementById("age"),r["年齢"]=a.lastElementChild.innerText,a=document.getElementById("race-ability"),r["種族特徴"]=a.lastElementChild.innerText,a=document.getElementById("birth"),r["生まれ"]=a.lastElementChild.innerText,a=document.getElementById("rank"),r["ランク"]=a.lastElementChild.innerText,r))),e.appendChild(function(e){var t,n;for(e=D(),t=C("能力値"),n=Object.entries(e),i=0;i<n.length;i++){var r;r=C(n[i][0],n[i][1][0]),t.appendChild(r),r=C(`${n[i][0]}増強`,n[i][1][1]),t.appendChild(r),r=C(`${n[i][0]}ボーナス`,n[i][1][2]),t.appendChild(r)}return t}(D())),e.appendChild(C("冒険者レベル",A(document.getElementById("level").lastElementChild.innerText))),e.appendChild(function(e){var t,n;for(t=C("抵抗力"),n=Object.entries(e),i=0;i<n.length;i++){var r;r=C(n[i][0],n[i][1]),t.appendChild(r)}return t}((u={},c=A(c=(d=document.getElementById("sub-status")).getElementsByTagName("dd").item(0).innerText),u["生命抵抗力"]=c,c=A(c=d.getElementsByTagName("dd").item(1).innerText),u["精神抵抗力"]=c,u))),e.appendChild(function(e){var t,n;for(t=C("魔物知識&先制力"),n=Object.entries(e),i=0;i<n.length;i++){var r;r=C(n[i][0],n[i][1]),t.appendChild(r)}return t}(function(){var e,t;return e={},(t=document.getElementById("monster-lore").getElementsByTagName("dd").item(0).innerText).includes("=")&&(t=/=(\d+)$/.exec(t)[1]),t=A(t),e["魔物知識"]=t,(t=document.getElementById("initiative").getElementsByTagName("dd").item(0).innerText).includes("=")&&(t=/=(\d+)$/.exec(t)[1]),t=A(t),e["先制力"]=t,e}())),e.appendChild(function(e){var t,n;for(t=C("移動能力"),n=Object.entries(e),i=0;i<n.length;i++){var r;r=C(n[i][0],n[i][1]),t.appendChild(r)}return t}(function(){var e,t,n;return n={},t=A(t=(e=document.getElementById("mobility")).getElementsByTagName("b").item(0).innerText),n["制限移動"]=t,t=A(t=e.getElementsByTagName("b").item(1).innerText),n["移動力"]=t,t=A(t=e.getElementsByTagName("b").item(2).innerText),n["全力移動"]=t,n}())),0!=document.getElementById("classes").getElementsByTagName("dt").length&&e.appendChild(function(e){var t,n;for(n=Object.entries(e),t=C("技能"),i=0;i<n.length;i++){var r;r=C(n[i][0],n[i][1]),t.appendChild(r)}return t}(function(){var e,t,n,r;for(e=document.getElementById("classes"),t={},names=e.getElementsByTagName("dt"),r=e.getElementsByTagName("dd"),n=names.length,i=0;i<n;i++)t[names.item(i).innerText]=Number(r.item(i).innerText);return t}())),0!=document.getElementById("combat-feats").getElementsByTagName("li").length&&e.appendChild(function(e){var t,n;for(t=C("戦闘特技"),n=Object.entries(e),i=0;i<n.length;i++){var r;r=C(n[i][1]),t.appendChild(r)}return t}(function(){var e,t;for(t={},e=document.getElementById("combat-feats").getElementsByTagName("ul").item(0).children,i=0;i<e.length;i++){var n=e.item(i);if(n.hasAttribute("data-lv")){var r=n.getAttribute("data-lv");t[r=A(r)]=n.innerText}else t[`auto_${i}`]=n.innerText}return t}())),document.getElementById("common-classes")&&e.appendChild(function(e){var t;for(t=C("一般技能"),i=0;i<e.length;i++){var n,r;n=C((r=Object.entries(e[i])[0])[0],r[1]),t.appendChild(n)}return t}(function(){var e,t,n,r;for(t=[],n=(e=document.getElementById("common-classes")).lastElementChild.getElementsByTagName("dt"),r=e.lastElementChild.getElementsByTagName("dd"),i=0;i<n.length;i++){var a;(a={})[n.item(i).innerText]=A(r.item(i).innerText),t.push(a)}return t}())),document.getElementById("magic-power")&&e.appendChild(function(e){var t;for(t=C("魔力"),i=0;i<e.length;i++){var n,r;r=/(ソーサラー|コンジャラー|フェアリーテイマー|プリースト)/,n=C(/バード/.test(e[i][0])?`奏力:${e[i][1]}`:r.test(e[i][0])?`魔力:${e[i][1]}`:`${e[i][1]}`,e[i][2]),t.appendChild(n)}return t}(M())),"なし"!=document.getElementById("crafts").getElementsByTagName("li").item(0).innerText&&e.appendChild(function(e){var t,n;for(t=C("練技／呪歌／騎芸／賦術"),n=Object.entries(e),i=0;i<n.length;i++){var r,a;for(r=C(n[i][0]),a=n[i][1],j=0;j<a.length;j++){var d;d=C(a[j]),r.appendChild(d)}t.appendChild(r)}return t}(function(){var e;for(abirities={},e=document.getElementById("crafts").getElementsByTagName("div"),i=0;i<e.length;i++){var t,n;for(t=e.item(i).getElementsByTagName("h2").item(0).innerText,abirities[t]=[],n=e.item(i).getElementsByTagName("li"),j=0;j<n.length;j++){var r;r=(r=n.item(j).innerText).substring(1,r.length-1),abirities[t].push(r)}}return abirities}())),document.getElementById("package").innerText.includes("なし")||e.appendChild(function(e){var t,n;for(t=C("判定パッケージ"),n=Object.entries(e),i=0;i<n.length;i++){var r,a;for(r=C(n[i][0]),a=Object.entries(n[i][1]),j=0;j<a.length;j++){var d;d=C(a[j][0],a[j][1]),r.appendChild(d)}t.appendChild(r)}return t}(P())),document.getElementById("weapons")&&e.appendChild(function(e){var t;for(t=C("武器"),i=0;i<e.length;i++){var n,r;r=`用法:${e[i][1]} 必筋:${e[i][2]} `,r+=`命中力:${e[i][3]} 威力:${e[i][4]} `,r+=`C値:${e[i][5]} 追加D:${e[i][6]} `,e[i][7]&&(r+="専用武器 "),r+=`備考:${e[i][8]}`,n=C(e[i][0],r),t.appendChild(n)}return t}(H())),e.appendChild(function(e){var t,n;for(t=C("防具"),n=Object.entries(e),i=0;i<n.length-2;i++){var r,a;a=`${n[i][1][0]} 必筋:${n[i][1][1]} `,a+=`回避力:${n[i][1][2]} 防護点:${n[i][1][3]} `,n[i][1][4]&&(a+="専用防具 "),a+=`備考:${n[i][1][5]}`,r=C(`防具:${n[i][0]}`,a),t.appendChild(r)}return t.appendChild(f(n[3][0],n[3][1],n[3][1])),t.appendChild(f(n[4][0],n[4][1],n[4][1])),t}(function(){var e,t,n,i;for(t={},n=(e=document.getElementById("armours")).getElementsByTagName("tr"),data=[],i=n.item(1).getElementsByTagName("td"),j=0;j<i.length;j++)r=i.item(j).innerText,4==j&&(r=!!r),data.push(r);for(t["鎧"]=data,data=[],i=n.item(2).getElementsByTagName("td"),j=0;j<i.length;j++)r=i.item(j).innerText,4==j&&(r=!!r),data.push(r);for(t["盾"]=data,data=[],i=n.item(2).getElementsByTagName("td"),j=0;j<i.length;j++){var r;r=i.item(j).innerText,4==j&&(r=!!r),data.push(r)}return t["他"]=data,e=document.getElementsByClassName("defense-total").item(0),t["回避力"]=Number(e.children.item(1).innerText),t["防護点"]=Number(e.children.item(2).innerText),t}())),document.getElementById("material-cards")&&e.appendChild(function(e){for(materialCardNode=C("マテリアルカード"),i=0;i<e.length;i++){var t,n;t=f(`${(n=Object.entries(e[i])[0])[0]}:B`,n[1][0],n[1][0]),materialCardNode.appendChild(t),t=f(`${n[0]}:A`,n[1][1],n[1][1]),materialCardNode.appendChild(t),t=f(`${n[0]}:S`,n[1][2],n[1][2]),materialCardNode.appendChild(t),t=f(`${n[0]}:SS`,n[1][3],n[1][3]),materialCardNode.appendChild(t)}return materialCardNode}(function(){var e,t;for(t=[],e=document.getElementById("material-cards").lastElementChild.lastElementChild.children,i=1;i<e.length;i++){var n,r;(n={})[(r=e.item(i).children).item(0).innerText]=[A(r.item(1).innerText),A(r.item(2).innerText),A(r.item(3).innerText),A(r.item(4).innerText)],t.push(n)}return t}())),e.appendChild(function(e){var t,n;return t=C("資産"),n="number"==typeof e[0]?f("所持金",e[0],e[0]):C("所持金",e[0]),t.appendChild(n),n="number"==typeof e[1]?f("預金",e[1],e[1]):C("預金",e[1]),t.appendChild(n),n="number"==typeof e[2]?f("借金",e[2],e[2]):C("借金",e[2]),t.appendChild(n),t}(function(){var e,t,n,i,r;return"G"!=(t=(e=document.getElementById("money")).children.item(1).innerText)?(t=t.substring(0,t.length-2),t=Number(t)):t=0,r=e.children.item(3).innerText,/^\d+\sG$/.test(r)?"G"!=r?(n=/^(\d+)\sG/.exec(r)[1],n=Number(n),i=/(\d+)\sG$/.exec(r)[1],i=Number(i)):(n=0,i=0):(n=r,i=r),[t,n,i]}())),document.getElementById("items").lastElementChild.innerText&&e.appendChild(function(e){var t,n;for(t=C("所持品"),n=e,i=0;i<n.length;i++){var r;r=C(n[i]),t.appendChild(r)}return t}(document.getElementById("items").children.item(1).innerText.split(/\s/).filter(function(e){return!!e}))),e.appendChild(function(){var e,t;return e=C("バフ/デバフ管理"),t=f("持続ラウンドカウンタA",0,6),e.appendChild(t),t=f("持続ラウンドカウンタB",0,6),e.appendChild(t),t=f("持続ラウンドカウンタC",0,6),e.appendChild(t),t=E("説明","減少の数値も正数で入力してください\n負数(マイナス値)は入力しないでください\n能力値にかかるバフ/デバフと副能力にかかるバフ/デバフは重複します\n例:魔力バフと知力バフ,筋力バフと物理ダメージバフなどこれらのバフ管理データはチャットパレットで使用します\n"),t=f("物理:与ダメージ:増加",0,6),e.appendChild(t),t=f("魔法:与ダメージ:増加",0,6),e.appendChild(t),t=f("物理魔法共通:与ダメージ:増加",0,6),e.appendChild(t),t=f("物理:与ダメージ:減少",0,6),e.appendChild(t),t=f("魔法:与ダメージ:減少",0,6),e.appendChild(t),t=f("物理魔法共通:与ダメージ:減少",0,6),e.appendChild(t),t=f("物理:被ダメージ:軽減",0,6),e.appendChild(t),t=f("魔法:被ダメージ:軽減",0,6),e.appendChild(t),t=f("物理魔法共通:被ダメージ:軽減",0,6),e.appendChild(t),t=f("命中力:増加",0,6),e.appendChild(t),t=f("命中力:減少",0,6),e.appendChild(t),t=f("回避力:増加",0,6),e.appendChild(t),t=f("回避力:減少",0,6),e.appendChild(t),t=f("魔力:増加",0,6),e.appendChild(t),t=f("魔力:減少",0,6),e.appendChild(t),t=f("防護点:増加",0,6),e.appendChild(t),t=f("防護点:減少",0,6),e.appendChild(t),t=f("移動力:増加",0,6),e.appendChild(t),t=f("制限移動:増加",0,6),e.appendChild(t),t=f("精神抵抗:増加",0,6),e.appendChild(t),t=f("生命抵抗:増加",0,6),e.appendChild(t),t=f("精神抵抗:減少",0,6),e.appendChild(t),t=f("生命抵抗:減少",0,6),e.appendChild(t),t=f("器用度ボーナス:増強",0,6),e.appendChild(t),t=f("器用度ボーナス:減少",0,6),e.appendChild(t),t=f("敏捷度ボーナス:増強",0,6),e.appendChild(t),t=f("敏捷度ボーナス:減少",0,6),e.appendChild(t),t=f("筋力ボーナス:増強",0,6),e.appendChild(t),t=f("筋力ボーナス:減少",0,6),e.appendChild(t),t=f("生命力ボーナス:増強",0,6),e.appendChild(t),t=f("生命力ボーナス:減少",0,6),e.appendChild(t),t=f("知力ボーナス:増強",0,6),e.appendChild(t),t=f("知力ボーナス:減少",0,6),e.appendChild(t),t=f("精神力ボーナス:増強",0,6),e.appendChild(t),t=f("精神力ボーナス:減少",0,6),e.appendChild(t),e}()),e.appendChild(E("その他メモ",document.getElementById("free-note").lastElementChild.innerText)),m=l,!0}function V(){return T()?(t=new JSZip,k().then(function(){return e=(e=(e=m.outerHTML).replace(/currentvalue/g,"currentValue")).replace(/<br>/g,"\n"),t.file("data.xml",e),imageUri=y(),function(){var e=y(),t=p.exec(e);if(!t)return!1;a=t[1]}(),v(imageUri).then(function(){d=`${n}.${a}`}).then(function(){return function(e){return fetch(e).then(function(e){return!!e.ok&&(r=e.arrayBuffer(),!0)})}(imageUri).then(function(){return t.file(d,r,{binary:!0}),u=t,!0})})})):function(){var e,t=new JSZip;return k(),e=(e=m.outerHTML).replace(/currentvalue/g,"currentValue"),t.file("data.xml",e),u=t,!0}();var e,t}function F(){return T()?V().then(function(){u.generateAsync({type:"blob"}).then(function(e){return saveAs(e,`${t}.zip`),!0})}):(V(),void u.generateAsync({type:"blob"}).then(function(e){return saveAs(e,`${t}.zip`),!0}))}function R(){t=g()}e=h.exec(s)[1],R(),F()}();